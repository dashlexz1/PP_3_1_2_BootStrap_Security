<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Edit user</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
</head>
<body>
<th:include th:replace="navbar :: navbar"></th:include>
<div class = "container">
<h1>Admin Panel</h1>
<table class="table">
<thead>
<tr>
    <th scope="col">ID</th>
    <th scope="col">Name</th>
    <th scope="col">Salary</th>
    <th scope="col">Age</th>
    <th scope="col">Email</th>
    <th scope="col">Role</th>
    <th scope="col">Edit</th>
    <th scope="col">Delete</th>
</tr>
</thead>
<tbody class="text-center table-light">
<tr th:each="user : ${users}">
    <td th:text="${user.id}"></td>
    <td th:text="${user.name}"></td>
    <td th:text="${user.salary}"></td>
    <td th:text="${user.age}"></td>
    <td th:text="${user.username}"></td>
    <td>
    <dl th:each="role : ${user.getUserRoles()}">
    <dd th:text="${role.roleName}"></dd>
    </dl>
    </td>
    <td>
        <a th:href="@{admin/{id}/edit(id = ${user.getId()})}"
           class="btn btn-primary eBtn">Edit</a>
    </td>
    <td>
        <form th:method="DELETE"
              th:action="@{/admin/removeUser}">
            <input type="submit" value="Delete"
                   class="btn btn-danger">
        </form>
    </td>
</tr>
</tbody>
</table>
<div class="myForm">
    <div class="modal fade" id="exampleModal"
         tabindex="-1"
         role="dialog"
         aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"
                        id="exampleModalLabel">Edit
                        user</h5>
                    <button type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:method="POST"
                      th:action="@{/admin/edit}">

                    <div class="modal-body">
                        <div class="form-group">
                            <label for="userId">ID</label>
                            <input readonly type="text"
                                   class="form-control"
                                   id="userId"
                                   aria-describedby="idHelp"
                                   name="id"
                                   value="">
                        </div>
                        <div class="form-group">
                            <label for="userName">User
                                name</label>
                            <input type="text"
                                   class="form-control"
                                   id="userName"
                                   aria-describedby="idHelp"
                                   name="userName"
                                   value="">
                        </div>

                        <div class="form-group">
                            <label for="userAge">Age</label>
                            <input multiple type="number"
                                   min="0" max="200" step="1"
                                   class="form-control"
                                   id="userAge"
                                   aria-describedby="emailHelp"
                                   name="age"
                                   value="">
                        </div>

                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password"
                                   class="form-control"
                                   id="password"
                                   name="password"
                                   placeholder="Enter password">
                        </div>

                        <div class="selDiv" >
                            <label for="exampleFormControlSelectThisUser2">Role</label>
                            <select size="2" name="role1"
                                    multiple
                                    class="form-control"
                                    id="exampleFormControlSelectThisUser2">
                                <option value="1">
                                    ROLE_USER
                                </option>
                                <option value="2">
                                    ROLE_ADMIN
                                </option>
                            </select>
                        </div>

                    </div>


                    <div class="modal-footer">
                        <button type="button"
                                class="btn btn-secondary"
                                data-dismiss="modal">
                            Close
                        </button>
                        <input class="btn btn-primary"
                               type="submit"
                               value="Update!"/>
                    </div>
                </form>
            </div>
        </div>
    </div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
</div>
</div>
</body>
</html>